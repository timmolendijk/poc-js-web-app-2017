# Features Under Consideration

## Shared fields

If we want to share state over multiple instances, we currently need this to do so:

```tsx
class EventItemController {

  @observable private expanded: ReadonlyArray<Event> = [];

  isExpanded(event: Event): boolean {
    return this.expanded.indexOf(event) !== -1;
  }

  expand(event: Event) {
    const expanded = new Set(this.expanded);
    expanded.add(event);
    this.expanded = [...expanded];
  }

  collapse(event: Event) {
    const expanded = new Set(this.expanded);
    expanded.delete(event);
    this.expanded = [...expanded];
  }

}

@observer class EventItem extends Component<{ id: IIdentifier, event: Event }, {}> {

  @field private controller = new EventItemController();

  @computed get isExpanded(): boolean {
    return this.controller.isExpanded(this.props.event);
  }
  set isExpanded(value: boolean) {
    this.controller[value ? 'expand' : 'collapse'](this.props.event);
  }

  render() {
    const className = classNames('EventItem', { expanded: this.isExpanded });
    return <div onClick={() => this.isExpanded = true} className={className}>
      <Style>{styles}</Style>
      <p>{this.props.event.name}</p>
      {this.renderExpanded()}
    </div>;
  }

  private renderExpanded() {
    if (!this.isExpanded)
      return null;
    
    return <p>
      {this.props.event.pageUrl}<br />
      {this.props.event.venueName}
    </p>;
  }

}
```

More straight-forward and arguable more readable would be if we could do as follows:

```tsx
@observer class EventItem extends Component<{ id: IIdentifier, event: Event }, {}> {

  @observable.shared private expanded: ReadonlyArray<Event> = [];

  @computed get isExpanded(): boolean {
    return this.expanded.indexOf(this.props.event) !== -1;
  }
  set isExpanded(value: boolean) {
    const expanded = new Set(this.expanded);
    expanded[value ? 'add' : 'delete'](this.props.event);
    this.expanded = [...expanded];
  }

  render() {
    const className = classNames('EventItem', { expanded: this.isExpanded });
    return <div onClick={() => this.isExpanded = true} className={className}>
      <Style>{styles}</Style>
      <p>{this.props.event.name}</p>
      {this.renderExpanded()}
    </div>;
  }

  private renderExpanded() {
    if (!this.isExpanded)
      return null;
    
    return <p>
      {this.props.event.pageUrl}<br />
      {this.props.event.venueName}
    </p>;
  }

}
```