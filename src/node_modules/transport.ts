export interface IListParams {
  readonly [opt: string]: any;
}

export interface IListResult<M, P extends IListParams> extends ReadonlyArray<M> {
  readonly size: number;
  readonly params: P;
}

export interface ITransport<M> {
  list(opts?: IListParams): Promise<IListResult<M, IListParams>>;
}

type IOperation = keyof ITransport<any>;

// TODO(tim): Move the generic part of this logic to `./Error`.

export interface ITransportError extends Error {
  name: 'TransportError';
  operation: IOperation;
}

export function createTransportError(operation: IOperation, message: string) {
  return Object.assign(new Error(message), {
    name: 'TransportError',
    operation
  });
}

export function isTransportError(err): err is ITransportError {
  return (err as ITransportError).name === 'TransportError';
}
